USE [CarToys]

BEGIN TRY
    BEGIN TRANSACTION

ALTER TABLE catalog.Rateplan
ADD IsShared bit DEFAULT(0) NOT NULL
GO

    COMMIT TRANSACTION
END TRY
BEGIN CATCH
    IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION
END CATCH

BEGIN TRY
    BEGIN TRANSACTION

UPDATE catalog.Rateplan
SET IsShared = '1'
WHERE CarrierBillCode IN (
'86487'
,'86489'
,'86491'
,'86492'
,'86494'
,'86495'
,'86496'
,'86497'
,'86498'
,'86499'
,'86500'
,'86501'
,'86502'
,'86503'
,'86504'
,'86505'
,'86506'
,'86507'
,'86508'
,'86509'
,'86510'
,'86511'
,'86512'
,'86513'
)

    COMMIT TRANSACTION
END TRY
BEGIN CATCH
    IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION
END CATCH


SELECT
	CarrierBillCode
	,IsShared
FROM catalog.rateplan